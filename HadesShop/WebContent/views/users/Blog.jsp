<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="shortcut icon" href="//theme.hstatic.net/1000306633/1000891824/14/favicon.png?v=572" type="image/png" />
<title>Hades Shop</title>
<%@include file="/configs/getbootstrap.jsp" %>
<!--===============================================================================================-->
				<link rel="icon" type="image/png" href="assets/images/icons/favicon.png" />
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css"
					href="assets/fonts/iconic/css/material-design-iconic-font.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/fonts/linearicons-v1.0.0/icon-font.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/animate/animate.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/css-hamburgers/hamburgers.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/animsition/css/animsition.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/select2/select2.min.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/daterangepicker/daterangepicker.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/slick/slick.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/MagnificPopup/magnific-popup.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/vendor/perfect-scrollbar/perfect-scrollbar.css">
				<!--===============================================================================================-->
				<link rel="stylesheet" type="text/css" href="assets/css/util.css">
				<link rel="stylesheet" type="text/css" href="assets/css/main.css">
				<!--===============================================================================================-->
</head>
<body class="animsition">
<jsp:include page="/views/components/NavOnly.jsp"></jsp:include>
<!-- Title page -->
<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url('assets/images/Banner/slideshow_0.jpg'); height: 325px;padding-top: 120px;">
    <h2 class="ltext-105 cl0 txt-center" style="color: #dc3545;">
        Blog
    </h2>
</section>	


<!-- Content page -->
<section class="bg0 p-t-62 p-b-60">
   <!-- Banner -->
	<div class="sec-banner bg0 p-t-95 p-b-55">
		<div class="container">
			<div class="row" id="js-list-caterory-banner">
				<div class="col-md-6 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="assets/images/banner-04.jpg" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									Women
								</span>

								<span class="block1-info stext-102 trans-04">
									New Trend
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-6 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="assets/images/banner-05.jpg" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									Men
								</span>

								<span class="block1-info stext-102 trans-04">
									New Trend
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-6 col-lg-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="assets/images/banner-07.jpg" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									Watches
								</span>

								<span class="block1-info stext-102 trans-04">
									Spring 2018
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-6 col-lg-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="assets/images/banner-08.jpg" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									Bags
								</span>

								<span class="block1-info stext-102 trans-04">
									Spring 2018
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>

				<div class="col-md-6 col-lg-4 p-b-30 m-lr-auto">
					<!-- Block1 -->
					<div class="block1 wrap-pic-w">
						<img src="assets/images/banner-09.jpg" alt="IMG-BANNER">

						<a href="product.html" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3">
							<div class="block1-txt-child1 flex-col-l">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									Accessories
								</span>

								<span class="block1-info stext-102 trans-04">
									Spring 2018
								</span>
							</div>

							<div class="block1-txt-child2 p-b-4 trans-05">
								<div class="block1-link stext-101 cl0 trans-09">
									Shop Now
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>	

		

	
	<jsp:include page="/views/components/Footer.jsp"></jsp:include>
	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

<!--===============================================================================================-->
<script src="assets/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/bootstrap/js/popper.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/select2/select2.min.js"></script>
<script>
	$(".js-select2").each(function () {
		$(this).select2({
			minimumResultsForSearch: 20,
			dropdownParent: $(this).next('.dropDownSelect2')
		});
	})
</script>
<!--===============================================================================================-->
<script src="assets/vendor/daterangepicker/moment.min.js"></script>
<script src="assets/vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/slick/slick.min.js"></script>
<script src="assets/js/slick-custom.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/parallax100/parallax100.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>

<!--===============================================================================================-->
<script src="assets/vendor/isotope/isotope.pkgd.min.js"></script>
<!--===============================================================================================-->
<script src="assets/vendor/sweetalert/sweetalert.min.js"></script>

<!--===============================================================================================-->
<script src="assets/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<script>
	$('.js-pscroll').each(function () {
		$(this).css('position', 'relative');
		$(this).css('overflow', 'hidden');
		var ps = new PerfectScrollbar(this, {
			wheelSpeed: 1,
			scrollingThreshold: 1000,
			wheelPropagation: false,
		});

		$(window).on('resize', function () {
			ps.update();
		})
	});
</script>
<!--===============================================================================================-->
<script src="assets/js/mainn.js"></script>
<script type="text/javascript">
    /*----------------------GET Select Wards-----------------------*/
    function getCategoriesBlog() {
        return new Promise((resolve, reject) => {
            $.ajax({
				url: "/HadesShop/Blog",
				type: 'GET',
				data: {
					action: "getcategoriesblog",
				},
				success: function (data) {
					resolve(data)
				},
				error: function (error) {
						reject(error)
				},
				})
		})				
	}				
	/*---------------------------------------------*/
    function shoppingCartNav(){
        
		/*--------------------Shopping Cart-----------------------*/
		// Lấy giỏ hàng từ cookie nếu tồn tại
		let cart = getCartFromCookie();

		// Hiển thị các sản phẩm trong giỏ hàng
		displayCartItems();

		// Hàm để lấy giỏ hàng từ cookie
		function getCartFromCookie() {
			let cartCookie = getCookie("cart");
			if (cartCookie !== "") {
				return JSON.parse(cartCookie);
			}
			return [];
		}

		// Hàm để lưu giỏ hàng vào cookie
		function saveCartToCookie() {
			setCookie("cart", JSON.stringify(cart), 7);
		}

		// Hàm để thêm sản phẩm vào giỏ hàng
		function addToCart(productItem) {		
			console.log("product.productId 1",productItem.productId);	
			console.log("cart-addToCart",cart);			
			// Kiểm tra sản phẩm đã có trong giỏ hàng hay chưa
			var existingProduct = cart.find(function(item) {
				console.log("isProductID:",item.productId == productItem.productId);
				console.log("item.productId",item.productId);
				console.log("product.productId 2",productItem.productId);
				return item.productId == productItem.productId;
			});
			console.log("existingProduct",existingProduct);
			if (existingProduct) {
				// Nếu sản phẩm đã có trong giỏ hàng
				existingProduct.quantity = existingProduct.quantity + parseFloat(productItem.quantity);
				console.log("existingProduct.quantity",existingProduct.quantity);
			} else {
				// Nếu sản phẩm chưa có trong giỏ hàng
				const productCartItem = {
					productId: productItem.productId,
					productName: productItem.productName,
					quantity: parseFloat(productItem.quantity),
					price: productItem.price,
					productImage: productItem.productImage
				}
				cart.push(productCartItem);
			}
			saveCartToCookie();
			displayCartItems();
		}

		// Hàm để xóa sản phẩm khỏi giỏ hàng
		function removeFromCart(index) {
			cart.splice(index, 1);
			saveCartToCookie();
			totalPriceCart();
		}

		// Hàm để xóa toàn bộ giỏ hàng
		function clearCart() {
			cart = [];
			saveCartToCookie();
			displayCartItems();
		}

		// Hàm để hiển thị các sản phẩm trong giỏ hàng
		function displayCartItems() {
			console.log("cart",cart);
			const cartItemsElement = document.getElementById("js-model-shopping-cart");
			cartItemsElement.innerHTML = "";
			cart.forEach((item, index) => {
				const html = '<li  class="header-cart-item flex-w flex-t m-b-12"><div class="header-cart-item-img" data-row-index="'+index+'"><img src="assets/images/products/'+item.productImage+'" alt="IMG"></div><div class="header-cart-item-txt p-t-8"><a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">'+item.productName+'</a><span class="header-cart-item-info">'+item.price+' x '+item.quantity+'</span></div></li>';
				cartItemsElement.innerHTML += html;			
			});	
			totalPriceCart();
			addEventDelete();
		}
		//Hàm tính total price
		function totalPriceCart(){

			const cartTotalProduct = document.getElementById("js-cart-total-product");
			let num = 0;
			let totalPrice = 0;
			cart.forEach((item, index) => {
				totalPrice += item.price * item.quantity;
				num++;
			})
			$('#js-num-product-cart').attr('data-notify',num);
			console.log("totalPrice",totalPrice);
			cartTotalProduct.innerText = "Total: "+totalPrice;
		}
		//Hàm add Event delete
		function addEventDelete(){
			$('.header-cart-item-img').each(function () {	
				$(this).on('click', function (e) {
					var indexValue = $(this).attr('data-row-index');
					console.log("$(this)",$(this));						
					console.log("indexValue",indexValue);
					$(this).parent().remove();	
					removeFromCart(indexValue);
				});
			});
		}
		// Hàm để hiển thị các sản phẩm trong giỏ hàng
		function displayAddCartItems(item) {
			const cartItemsElement = document.getElementById("js-model-shopping-cart");
			const html = '<li class="header-cart-item flex-w flex-t m-b-12"><div class="header-cart-item-img"><img src="assets/images/products/'+item.productImage+'" alt="IMG"></div><div class="header-cart-item-txt p-t-8"><a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">'+item.productName+'</a><span class="header-cart-item-info">'+item.price+'</span></div></li>';
			cartItemsElement.innerHTML += html;		
		}

		// Hàm để lấy giá trị cookie
		function getCookie(name) {
			const cookieName = name + "=";
			const cookies = document.cookie.split(";");

			for (let i = 0; i < cookies.length; i++) {
				let cookie = cookies[i].trim();
				if (cookie.startsWith(cookieName)) {
					return cookie.substring(cookieName.length, cookie.length);
				}
			}

			return "";
		}

		// Hàm để đặt giá trị cookie
		function setCookie(name, value, days) {
			const expirationDate = new Date();
			expirationDate.setTime(expirationDate.getTime() + (days * 24 * 60 * 60 * 1000));
			document.cookie = name + "=" + value + ";expires=" + expirationDate.toUTCString() + ";path=/";
		}
		/*---------------------------------------------*/	
    }
    //Window Ready
	$(document).ready(function () {
        shoppingCartNav();
        getCategoriesBlog().then(data =>{
            const containerCaterorysBanner = document.getElementById('js-list-caterory-banner');
            containerCaterorysBanner.innerHTML = "";
            const dataMapBanner = data.map(item => {
				return '<div class="col-md-6 col-lg-4 p-b-30 m-lr-auto"><!-- Block1 --><div class="block1 wrap-pic-w"><img src="assets/images/DanhMuc/'+item.AnhDaiDien+'" alt="IMG-BANNER"><a href="BlogItem?ID='+item.MaDM+'" class="block1-txt ab-t-l s-full flex-col-l-sb p-lr-38 p-tb-34 trans-03 respon3"><div class="block1-txt-child1 flex-col-l"><span class="block1-name ltext-102 trans-04 p-b-8">'+item.TenDM+'</span><span class="block1-info stext-102 trans-04">New Trend</span></div><div class="block1-txt-child2 p-b-4 trans-05"><div class="block1-link stext-101 cl0 trans-09">Shop Now</div></div></a></div></div>';
			})
            containerCaterorysBanner.innerHTML = dataMapBanner.join("");
        }).catch(err =>{
            console.log("Err getCategoriesBlog:",err)
        })
    })
    
</script>